<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#2563eb">
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect fill='%232563eb' width='100' height='100'/><text y='75' font-size='70' fill='white' text-anchor='middle' x='50'>‚öΩ</text></svg>">
    <link rel="manifest" href="data:application/json;base64,eyJuYW1lIjoiRXVyb3BlYW4gRm9vdGJhbGwgU3RhdHMiLCJzaG9ydF9uYW1lIjoiRm9vdGJhbGwgU3RhdHMiLCJzdGFydF91cmwiOiIvIiwiZGlzcGxheSI6InN0YW5kYWxvbmUiLCJiYWNrZ3JvdW5kX2NvbG9yIjoiI2ZmZmZmZiIsInRoZW1lX2NvbG9yIjoiIzI1NjNlYiIsImlkb25zIjpbeyJzcmMiOiJkYXRhOmltYWdlL3N2Zyt4bWwsPHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCAxMDAgMTAwJz48cmVjdCBmaWxsPSclMjMyNTYzZWInIHdpZHRoPScxMDAnIGhlaWdodD0nMTAwJy8+PHRleHQgeT0nNzUnIGZvbnQtc2l6ZT0nNzAnIGZpbGw9J3doaXRlJyB0ZXh0LWFuY2hvcj0nbWlkZGxlJyB4PSc1MCc+4pq94L2QPC90ZXh0Pjwvc3ZnPiIsInNpemVzIjoiNTEyeDUxMiIsInR5cGUiOiJpbWFnZS9zdmcreG1sIn1dfQ==">
    <title>Football Stats</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        * {
            -webkit-tap-highlight-color: transparent;
        }
        body {
            overscroll-behavior-y: contain;
            touch-action: pan-y;
        }
        .safe-area {
            padding-top: env(safe-area-inset-top);
            padding-bottom: env(safe-area-inset-bottom);
        }
        @supports (orientation: landscape) {
            @media (orientation: landscape) {
                .landscape-grid {
                    display: grid;
                    grid-template-columns: repeat(2, 1fr);
                    gap: 1rem;
                }
            }
        }
        .offline-banner {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .stat-cell {
            text-align: center;
            font-size: 0.75rem;
            font-weight: 600;
            padding: 0.25rem 0.125rem;
        }
        .stat-value-high {
            color: #16a34a;
        }
        .stat-value-medium {
            color: #2563eb;
        }
        .stat-value-low {
            color: #dc2626;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen safe-area">
    <div id="root"></div>

    <script type="text/babel" data-type="module">
        const { useState, useEffect } = React;

        const FootballPWA = () => {
            const [selectedLeague, setSelectedLeague] = useState('epl');
            const [isOnline, setIsOnline] = useState(navigator.onLine);
            const [installPrompt, setInstallPrompt] = useState(null);
            const [expandedMatch, setExpandedMatch] = useState(null);

            useEffect(() => {
                const handleOnline = () => setIsOnline(true);
                const handleOffline = () => setIsOnline(false);
                
                window.addEventListener('online', handleOnline);
                window.addEventListener('offline', handleOffline);

                const handleInstall = (e) => {
                    e.preventDefault();
                    setInstallPrompt(e);
                };
                window.addEventListener('beforeinstallprompt', handleInstall);

                return () => {
                    window.removeEventListener('online', handleOnline);
                    window.removeEventListener('offline', handleOffline);
                    window.removeEventListener('beforeinstallprompt', handleInstall);
                };
            }, []);

            const handleInstallClick = async () => {
                if (!installPrompt) return;
                installPrompt.prompt();
                const { outcome } = await installPrompt.userChoice;
                setInstallPrompt(null);
            };

            // Calculate comprehensive goal statistics
            const calculateGoalStats = (matches) => {
                const totalMatches = matches.length;
                let over15 = 0;
                let over25 = 0;
                let over35 = 0;
                let btts = 0;
                let scored = 0;
                let conceded = 0;

                matches.forEach(match => {
                    const [homeGoals, awayGoals] = match.score.split('-').map(Number);
                    const totalGoals = homeGoals + awayGoals;
                    
                    const teamGoals = match.venue === 'home' ? homeGoals : awayGoals;
                    const opponentGoals = match.venue === 'home' ? awayGoals : homeGoals;
                    
                    if (totalGoals > 1.5) over15++;
                    if (totalGoals > 2.5) over25++;
                    if (totalGoals > 3.5) over35++;
                    if (homeGoals > 0 && awayGoals > 0) btts++;
                    if (teamGoals > 0) scored++;
                    if (opponentGoals > 0) conceded++;
                });

                return {
                    over15: Math.round((over15 / totalMatches) * 100),
                    over25: Math.round((over25 / totalMatches) * 100),
                    over35: Math.round((over35 / totalMatches) * 100),
                    btts: Math.round((btts / totalMatches) * 100),
                    scored: Math.round((scored / totalMatches) * 100),
                    conceded: Math.round((conceded / totalMatches) * 100),
                };
            };

            // Get head to head stats at home venue
            const getH2HAtHomeVenue = (h2h, homeTeam) => {
                const homeVenueGames = h2h.filter(game => game.home === homeTeam);
                return homeVenueGames.slice(0, 3); // Last 3 at home venue
            };

            const leagues = {
                epl: {
                    name: 'Premier League',
                    flag: 'üè¥Û†ÅßÛ†Å¢Û†Å•Û†ÅÆÛ†ÅßÛ†Åø',
                    matches: [
                        {
                            id: 1,
                            home: 'Arsenal',
                            away: 'Man City',
                            homeScore: 2,
                            awayScore: 1,
                            status: 'final',
                            date: 'Feb 14',
                            homeForm: { 
                                overall: 'WWDWW', 
                                home: 'WWWDW', 
                                lastFive: [
                                    { vs: 'Chelsea', score: '3-1', result: 'W', venue: 'home' },
                                    { vs: 'Liverpool', score: '2-2', result: 'D', venue: 'home' },
                                    { vs: 'Spurs', score: '2-0', result: 'W', venue: 'home' },
                                    { vs: 'Brighton', score: '3-0', result: 'W', venue: 'home' },
                                    { vs: 'Everton', score: '4-0', result: 'W', venue: 'home' }
                                ]
                            },
                            awayForm: { 
                                overall: 'WWLWW', 
                                away: 'WWLWL', 
                                lastFive: [
                                    { vs: 'Newcastle', score: '2-1', result: 'W', venue: 'away' },
                                    { vs: 'Aston Villa', score: '1-3', result: 'L', venue: 'away' },
                                    { vs: 'Wolves', score: '3-0', result: 'W', venue: 'away' },
                                    { vs: 'West Ham', score: '2-1', result: 'W', venue: 'away' },
                                    { vs: 'Fulham', score: '1-2', result: 'L', venue: 'away' }
                                ]
                            },
                            headToHead: [
                                { date: 'Sep 22, 2025', home: 'Man City', away: 'Arsenal', score: '2-2' },
                                { date: 'Apr 28, 2025', home: 'Arsenal', away: 'Man City', score: '1-0' },
                                { date: 'Mar 15, 2025', home: 'Arsenal', away: 'Man City', score: '2-1' },
                                { date: 'Dec 31, 2024', home: 'Man City', away: 'Arsenal', score: '1-1' },
                                { date: 'Oct 12, 2024', home: 'Arsenal', away: 'Man City', score: '0-1' }
                            ]
                        },
                        {
                            id: 2,
                            home: 'Liverpool',
                            away: 'Chelsea',
                            homeScore: 3,
                            awayScore: 2,
                            status: 'final',
                            date: 'Feb 15',
                            homeForm: { 
                                overall: 'WWWWL', 
                                home: 'WWWWW', 
                                lastFive: [
                                    { vs: 'Man United', score: '4-1', result: 'W', venue: 'home' },
                                    { vs: 'Brighton', score: '2-0', result: 'W', venue: 'home' },
                                    { vs: 'Newcastle', score: '3-1', result: 'W', venue: 'home' },
                                    { vs: 'Aston Villa', score: '2-1', result: 'W', venue: 'home' },
                                    { vs: 'Spurs', score: '3-0', result: 'W', venue: 'home' }
                                ]
                            },
                            awayForm: { 
                                overall: 'LWWDW', 
                                away: 'LWWDL', 
                                lastFive: [
                                    { vs: 'Arsenal', score: '1-2', result: 'L', venue: 'away' },
                                    { vs: 'Fulham', score: '1-1', result: 'D', venue: 'away' },
                                    { vs: 'Everton', score: '2-0', result: 'W', venue: 'away' },
                                    { vs: 'Wolves', score: '3-1', result: 'W', venue: 'away' },
                                    { vs: 'West Ham', score: '0-2', result: 'L', venue: 'away' }
                                ]
                            },
                            headToHead: [
                                { date: 'Oct 20, 2025', home: 'Chelsea', away: 'Liverpool', score: '1-2' },
                                { date: 'Aug 18, 2025', home: 'Liverpool', away: 'Chelsea', score: '2-0' },
                                { date: 'Mar 10, 2025', home: 'Liverpool', away: 'Chelsea', score: '3-1' },
                                { date: 'Jan 31, 2025', home: 'Chelsea', away: 'Liverpool', score: '0-0' },
                                { date: 'Nov 05, 2024', home: 'Liverpool', away: 'Chelsea', score: '1-1' }
                            ]
                        },
                        {
                            id: 3,
                            home: 'Man United',
                            away: 'Tottenham',
                            homeScore: null,
                            awayScore: null,
                            status: 'upcoming',
                            date: 'Feb 16',
                            homeForm: { 
                                overall: 'WDLWW', 
                                home: 'WWDWL', 
                                lastFive: [
                                    { vs: 'Newcastle', score: '3-2', result: 'W', venue: 'home' },
                                    { vs: 'Aston Villa', score: '1-2', result: 'L', venue: 'home' },
                                    { vs: 'Wolves', score: '2-2', result: 'D', venue: 'home' },
                                    { vs: 'Everton', score: '2-0', result: 'W', venue: 'home' },
                                    { vs: 'Brighton', score: '3-1', result: 'W', venue: 'home' }
                                ]
                            },
                            awayForm: { 
                                overall: 'DWWLW', 
                                away: 'DLWWL', 
                                lastFive: [
                                    { vs: 'Liverpool', score: '1-4', result: 'L', venue: 'away' },
                                    { vs: 'Chelsea', score: '2-1', result: 'W', venue: 'away' },
                                    { vs: 'Arsenal', score: '2-1', result: 'W', venue: 'away' },
                                    { vs: 'Man City', score: '1-1', result: 'D', venue: 'away' },
                                    { vs: 'West Ham', score: '0-2', result: 'L', venue: 'away' }
                                ]
                            },
                            headToHead: [
                                { date: 'Sep 29, 2025', home: 'Tottenham', away: 'Man United', score: '0-3' },
                                { date: 'May 12, 2025', home: 'Man United', away: 'Tottenham', score: '2-2' },
                                { date: 'Feb 20, 2025', home: 'Man United', away: 'Tottenham', score: '3-1' },
                                { date: 'Jan 14, 2025', home: 'Tottenham', away: 'Man United', score: '2-0' },
                                { date: 'Oct 08, 2024', home: 'Man United', away: 'Tottenham', score: '1-1' }
                            ]
                        }
                    ]
                },
                laliga: {
                    name: 'La Liga',
                    flag: 'üá™üá∏',
                    matches: [
                        {
                            id: 4,
                            home: 'Real Madrid',
                            away: 'Barcelona',
                            homeScore: null,
                            awayScore: null,
                            status: 'upcoming',
                            date: 'Feb 16',
                            homeForm: { 
                                overall: 'WWWWW', 
                                home: 'WWWWW', 
                                lastFive: [
                                    { vs: 'Sevilla', score: '3-0', result: 'W', venue: 'home' },
                                    { vs: 'Atletico', score: '2-1', result: 'W', venue: 'home' },
                                    { vs: 'Valencia', score: '4-1', result: 'W', venue: 'home' },
                                    { vs: 'Getafe', score: '2-0', result: 'W', venue: 'home' },
                                    { vs: 'Villarreal', score: '3-1', result: 'W', venue: 'home' }
                                ]
                            },
                            awayForm: { 
                                overall: 'WWDWW', 
                                away: 'WWDWL', 
                                lastFive: [
                                    { vs: 'Athletic', score: '1-2', result: 'L', venue: 'away' },
                                    { vs: 'Real Sociedad', score: '2-1', result: 'W', venue: 'away' },
                                    { vs: 'Betis', score: '1-1', result: 'D', venue: 'away' },
                                    { vs: 'Osasuna', score: '3-0', result: 'W', venue: 'away' },
                                    { vs: 'Girona', score: '2-1', result: 'W', venue: 'away' }
                                ]
                            },
                            headToHead: [
                                { date: 'Oct 26, 2025', home: 'Barcelona', away: 'Real Madrid', score: '0-4' },
                                { date: 'Apr 21, 2025', home: 'Real Madrid', away: 'Barcelona', score: '3-2' },
                                { date: 'Jan 15, 2025', home: 'Real Madrid', away: 'Barcelona', score: '2-1' },
                                { date: 'Oct 28, 2024', home: 'Barcelona', away: 'Real Madrid', score: '1-2' },
                                { date: 'Mar 19, 2024', home: 'Real Madrid', away: 'Barcelona', score: '1-1' }
                            ]
                        },
                        {
                            id: 5,
                            home: 'Atletico Madrid',
                            away: 'Sevilla',
                            homeScore: 2,
                            awayScore: 1,
                            status: 'final',
                            date: 'Feb 14',
                            homeForm: { 
                                overall: 'WWDLW', 
                                home: 'WWWLW', 
                                lastFive: [
                                    { vs: 'Barcelona', score: '2-1', result: 'W', venue: 'home' },
                                    { vs: 'Valencia', score: '1-2', result: 'L', venue: 'home' },
                                    { vs: 'Betis', score: '3-0', result: 'W', venue: 'home' },
                                    { vs: 'Villarreal', score: '2-0', result: 'W', venue: 'home' },
                                    { vs: 'Athletic', score: '1-0', result: 'W', venue: 'home' }
                                ]
                            },
                            awayForm: { 
                                overall: 'LDWDL', 
                                away: 'LLDWL', 
                                lastFive: [
                                    { vs: 'Real Madrid', score: '0-3', result: 'L', venue: 'away' },
                                    { vs: 'Girona', score: '1-1', result: 'D', venue: 'away' },
                                    { vs: 'Osasuna', score: '2-1', result: 'W', venue: 'away' },
                                    { vs: 'Real Sociedad', score: '0-2', result: 'L', venue: 'away' },
                                    { vs: 'Getafe', score: '1-2', result: 'L', venue: 'away' }
                                ]
                            },
                            headToHead: [
                                { date: 'Oct 05, 2025', home: 'Sevilla', away: 'Atletico Madrid', score: '1-1' },
                                { date: 'Apr 02, 2025', home: 'Atletico Madrid', away: 'Sevilla', score: '2-0' },
                                { date: 'Jan 12, 2025', home: 'Atletico Madrid', away: 'Sevilla', score: '3-1' },
                                { date: 'Dec 08, 2024', home: 'Sevilla', away: 'Atletico Madrid', score: '1-4' },
                                { date: 'Sep 20, 2024', home: 'Atletico Madrid', away: 'Sevilla', score: '2-2' }
                            ]
                        }
                    ]
                }
            };

            const currentMatches = leagues[selectedLeague].matches;

            const getStatColor = (value) => {
                if (value >= 80) return 'stat-value-high';
                if (value >= 50) return 'stat-value-medium';
                return 'stat-value-low';
            };

            const StatusBadge = ({ status }) => {
                if (status === 'final') return <span className="px-2 py-0.5 bg-gray-700 text-white text-xs rounded-full font-medium">FT</span>;
                if (status === 'upcoming') return <span className="px-2 py-0.5 bg-blue-600 text-white text-xs rounded-full font-medium">Upcoming</span>;
                return <span className="px-2 py-0.5 bg-green-600 text-white text-xs rounded-full font-medium">Live</span>;
            };

            const CompactMatchCard = ({ match }) => {
                const homeStats = calculateGoalStats(match.homeForm.lastFive);
                const awayStats = calculateGoalStats(match.awayForm.lastFive);
                const isExpanded = expandedMatch === match.id;
                const h2hAtHome = getH2HAtHomeVenue(match.headToHead, match.home);

                return (
                    <div className="bg-white rounded-xl shadow-lg overflow-hidden">
                        {/* Match Header */}
                        <div className="p-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white">
                            <div className="flex justify-between items-center">
                                <div className="text-xs opacity-90">üìÖ {match.date}</div>
                                <StatusBadge status={match.status} />
                            </div>
                        </div>

                        {/* Stats Table */}
                        <div className="overflow-x-auto">
                            <table className="w-full text-xs">
                                <thead>
                                    <tr className="bg-gray-100 border-b border-gray-300">
                                        <th className="text-left p-2 font-semibold sticky left-0 bg-gray-100">Team</th>
                                        <th className="stat-cell border-l border-gray-300">1.5</th>
                                        <th className="stat-cell">2.5</th>
                                        <th className="stat-cell">3.5</th>
                                        <th className="stat-cell border-l border-gray-300">BTTS</th>
                                        <th className="stat-cell border-l border-gray-300">Scored</th>
                                        <th className="stat-cell">Conceded</th>
                                        {match.status === 'final' && <th className="stat-cell border-l border-gray-300 bg-blue-50">Score</th>}
                                    </tr>
                                </thead>
                                <tbody>
                                    {/* Home Team Row */}
                                    <tr className="border-b border-gray-200 hover:bg-blue-50">
                                        <td className="p-2 font-bold text-gray-800 sticky left-0 bg-white">
                                            üè† {match.home}
                                        </td>
                                        <td className={`stat-cell border-l border-gray-200 ${getStatColor(homeStats.over15)}`}>
                                            {homeStats.over15}%
                                        </td>
                                        <td className={`stat-cell ${getStatColor(homeStats.over25)}`}>
                                            {homeStats.over25}%
                                        </td>
                                        <td className={`stat-cell ${getStatColor(homeStats.over35)}`}>
                                            {homeStats.over35}%
                                        </td>
                                        <td className={`stat-cell border-l border-gray-200 ${getStatColor(homeStats.btts)}`}>
                                            {homeStats.btts}%
                                        </td>
                                        <td className={`stat-cell border-l border-gray-200 ${getStatColor(homeStats.scored)}`}>
                                            {homeStats.scored}%
                                        </td>
                                        <td className={`stat-cell ${getStatColor(100 - homeStats.conceded)}`}>
                                            {homeStats.conceded}%
                                        </td>
                                        {match.status === 'final' && (
                                            <td className="stat-cell border-l border-gray-200 bg-blue-50 font-bold text-blue-600">
                                                {match.homeScore}
                                            </td>
                                        )}
                                    </tr>

                                    {/* Away Team Row */}
                                    <tr className="hover:bg-purple-50">
                                        <td className="p-2 font-bold text-gray-800 sticky left-0 bg-white">
                                            ‚úàÔ∏è {match.away}
                                        </td>
                                        <td className={`stat-cell border-l border-gray-200 ${getStatColor(awayStats.over15)}`}>
                                            {awayStats.over15}%
                                        </td>
                                        <td className={`stat-cell ${getStatColor(awayStats.over25)}`}>
                                            {awayStats.over25}%
                                        </td>
                                        <td className={`stat-cell ${getStatColor(awayStats.over35)}`}>
                                            {awayStats.over35}%
                                        </td>
                                        <td className={`stat-cell border-l border-gray-200 ${getStatColor(awayStats.btts)}`}>
                                            {awayStats.btts}%
                                        </td>
                                        <td className={`stat-cell border-l border-gray-200 ${getStatColor(awayStats.scored)}`}>
                                            {awayStats.scored}%
                                        </td>
                                        <td className={`stat-cell ${getStatColor(100 - awayStats.conceded)}`}>
                                            {awayStats.conceded}%
                                        </td>
                                        {match.status === 'final' && (
                                            <td className="stat-cell border-l border-gray-200 bg-blue-50 font-bold text-blue-600">
                                                {match.awayScore}
                                            </td>
                                        )}
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        {/* Expand Button */}
                        <button
                            onClick={() => setExpandedMatch(isExpanded ? null : match.id)}
                            className="w-full py-2 text-xs font-semibold text-blue-600 hover:bg-blue-50 transition-colors border-t border-gray-200"
                        >
                            {isExpanded ? '‚ñ≤ Hide Details' : '‚ñº Show Form & H2H'}
                        </button>

                        {/* Expanded Details */}
                        {isExpanded && (
                            <div className="p-4 bg-gray-50 border-t border-gray-200 space-y-4">
                                {/* Home Team Details */}
                                <div className="bg-white rounded-lg p-3 shadow-sm">
                                    <div className="font-bold text-sm text-gray-700 mb-3 flex items-center gap-2">
                                        üè† {match.home}
                                    </div>
                                    
                                    <div className="space-y-2 text-xs">
                                        <div>
                                            <div className="text-gray-600 mb-1">Last 5 Home Games:</div>
                                            <div className="flex gap-1">
                                                {match.homeForm.home.split('').map((f, i) => (
                                                    <span key={i} className={`w-7 h-7 text-center leading-7 rounded font-bold ${
                                                        f === 'W' ? 'bg-green-500 text-white' : 
                                                        f === 'D' ? 'bg-yellow-500 text-white' : 
                                                        'bg-red-500 text-white'
                                                    }`}>{f}</span>
                                                ))}
                                            </div>
                                            <div className="mt-1 text-gray-500">
                                                {match.homeForm.lastFive.map((m, i) => (
                                                    <div key={i}>{m.vs} {m.score}</div>
                                                ))}
                                            </div>
                                        </div>

                                        <div className="pt-2 border-t border-gray-200">
                                            <div className="text-gray-600 mb-1">Overall Form (Last 5):</div>
                                            <div className="flex gap-1">
                                                {match.homeForm.overall.split('').map((f, i) => (
                                                    <span key={i} className={`w-7 h-7 text-center leading-7 rounded font-bold ${
                                                        f === 'W' ? 'bg-green-500 text-white' : 
                                                        f === 'D' ? 'bg-yellow-500 text-white' : 
                                                        'bg-red-500 text-white'
                                                    }`}>{f}</span>
                                                ))}
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                {/* Away Team Details */}
                                <div className="bg-white rounded-lg p-3 shadow-sm">
                                    <div className="font-bold text-sm text-gray-700 mb-3 flex items-center gap-2">
                                        ‚úàÔ∏è {match.away}
                                    </div>
                                    
                                    <div className="space-y-2 text-xs">
                                        <div>
                                            <div className="text-gray-600 mb-1">Last 5 Away Games:</div>
                                            <div className="flex gap-1">
                                                {match.awayForm.away.split('').map((f, i) => (
                                                    <span key={i} className={`w-7 h-7 text-center leading-7 rounded font-bold ${
                                                        f === 'W' ? 'bg-green-500 text-white' : 
                                                        f === 'D' ? 'bg-yellow-500 text-white' : 
                                                        'bg-red-500 text-white'
                                                    }`}>{f}</span>
                                                ))}
                                            </div>
                                            <div className="mt-1 text-gray-500">
                                                {match.awayForm.lastFive.map((m, i) => (
                                                    <div key={i}>@ {m.vs} {m.score}</div>
                                                ))}
                                            </div>
                                        </div>

                                        <div className="pt-2 border-t border-gray-200">
                                            <div className="text-gray-600 mb-1">Overall Form (Last 5):</div>
                                            <div className="flex gap-1">
                                                {match.awayForm.overall.split('').map((f, i) => (
                                                    <span key={i} className={`w-7 h-7 text-center leading-7 rounded font-bold ${
                                                        f === 'W' ? 'bg-green-500 text-white' : 
                                                        f === 'D' ? 'bg-yellow-500 text-white' : 
                                                        'bg-red-500 text-white'
                                                    }`}>{f}</span>
                                                ))}
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                {/* Head to Head at Home Venue */}
                                <div className="bg-white rounded-lg p-3 shadow-sm">
                                    <div className="font-bold text-sm text-gray-700 mb-2">
                                        üîÑ H2H at {match.home} (Home)
                                    </div>
                                    <div className="space-y-1 text-xs">
                                        {h2hAtHome.length > 0 ? h2hAtHome.map((h2h, idx) => (
                                            <div key={idx} className="flex justify-between items-center p-2 bg-gray-50 rounded">
                                                <div className="text-gray-600">{h2h.date}</div>
                                                <div className="font-semibold">{h2h.home} {h2h.score} {h2h.away}</div>
                                            </div>
                                        )) : (
                                            <div className="text-gray-500 text-center py-2">No recent H2H at this venue</div>
                                        )}
                                    </div>
                                </div>
                            </div>
                        )}
                    </div>
                );
            };

            return (
                <div className="min-h-screen pb-6">
                    {/* Offline Banner */}
                    {!isOnline && (
                        <div className="offline-banner text-white p-3 text-center text-sm font-medium shadow-lg">
                            üì° Offline Mode
                        </div>
                    )}

                    {/* Install Banner */}
                    {installPrompt && (
                        <div className="bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-3 shadow-lg">
                            <div className="flex items-center justify-between max-w-4xl mx-auto px-2">
                                <div className="flex-1 min-w-0">
                                    <p className="font-semibold text-sm">Install Football Stats</p>
                                    <p className="text-xs opacity-90">Quick access from home screen</p>
                                </div>
                                <button
                                    onClick={handleInstallClick}
                                    className="ml-3 px-3 py-1.5 bg-white text-blue-600 rounded-lg font-semibold text-sm shadow-md active:scale-95 transition-transform flex-shrink-0"
                                >
                                    Install
                                </button>
                            </div>
                        </div>
                    )}

                    <div className="max-w-4xl mx-auto px-3 pt-4">
                        {/* Header */}
                        <div className="bg-white rounded-2xl shadow-xl p-4 mb-4">
                            <div className="flex items-center gap-2 mb-3">
                                <div className="text-2xl">‚öΩ</div>
                                <h1 className="text-xl font-bold text-gray-800">Football Stats</h1>
                            </div>
                            
                            {/* League Selector */}
                            <div className="flex gap-2">
                                <button
                                    onClick={() => {
                                        setSelectedLeague('epl');
                                        setExpandedMatch(null);
                                    }}
                                    className={`flex-1 px-3 py-2 rounded-xl font-semibold text-sm transition-all active:scale-95 ${
                                        selectedLeague === 'epl'
                                            ? 'bg-blue-600 text-white shadow-lg'
                                            : 'bg-gray-100 text-gray-700'
                                    }`}
                                >
                                    {leagues.epl.flag} Premier League
                                </button>
                                <button
                                    onClick={() => {
                                        setSelectedLeague('laliga');
                                        setExpandedMatch(null);
                                    }}
                                    className={`flex-1 px-3 py-2 rounded-xl font-semibold text-sm transition-all active:scale-95 ${
                                        selectedLeague === 'laliga'
                                            ? 'bg-blue-600 text-white shadow-lg'
                                            : 'bg-gray-100 text-gray-700'
                                    }`}
                                >
                                    {leagues.laliga.flag} La Liga
                                </button>
                            </div>
                        </div>

                        {/* Legend */}
                        <div className="bg-white rounded-xl shadow-md p-3 mb-4 text-xs">
                            <div className="font-semibold text-gray-700 mb-2">üìä Stats Guide:</div>
                            <div className="grid grid-cols-2 gap-2 text-gray-600">
                                <div><span className="font-bold">1.5/2.5/3.5</span> = Over goals %</div>
                                <div><span className="font-bold">BTTS</span> = Both teams score %</div>
                                <div><span className="font-bold">Scored</span> = Team scored %</div>
                                <div><span className="font-bold">Conceded</span> = Team conceded %</div>
                            </div>
                            <div className="mt-2 pt-2 border-t border-gray-200 flex gap-3">
                                <div className="flex items-center gap-1">
                                    <span className="w-3 h-3 rounded bg-green-500"></span>
                                    <span className="stat-value-high">80%+</span>
                                </div>
                                <div className="flex items-center gap-1">
                                    <span className="w-3 h-3 rounded bg-blue-500"></span>
                                    <span className="stat-value-medium">50-79%</span>
                                </div>
                                <div className="flex items-center gap-1">
                                    <span className="w-3 h-3 rounded bg-red-500"></span>
                                    <span className="stat-value-low">&lt;50%</span>
                                </div>
                            </div>
                        </div>

                        {/* Matches Grid - Responsive for landscape */}
                        <div className="landscape-grid space-y-4">
                            {currentMatches.map((match) => (
                                <CompactMatchCard key={match.id} match={match} />
                            ))}
                        </div>
                    </div>
                </div>
            );
        };

        ReactDOM.render(<FootballPWA />, document.getElementById('root'));
    </script>

    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script>
        // Service Worker for offline support
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                const swCode = `
                    const CACHE_NAME = 'football-stats-v5';
                    const urlsToCache = ['/'];
                    
                    self.addEventListener('install', event => {
                        event.waitUntil(
                            caches.open(CACHE_NAME)
                                .then(cache => cache.addAll(urlsToCache))
                        );
                    });
                    
                    self.addEventListener('fetch', event => {
                        event.respondWith(
                            caches.match(event.request)
                                .then(response => response || fetch(event.request))
                        );
                    });
                `;
                
                const blob = new Blob([swCode], { type: 'application/javascript' });
                const swUrl = URL.createObjectURL(blob);
                
                navigator.serviceWorker.register(swUrl)
                    .then(reg => console.log('Service Worker registered'))
                    .catch(err => console.log('Service Worker registration failed:', err));
            });
        }
    </script>
</body>
</html>